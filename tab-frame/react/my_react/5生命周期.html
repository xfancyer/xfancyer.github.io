<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>属性传递</title>
</head>
<script src="build/react.js" type="text/javascript" charset="utf-8"></script>
<script src="build/react-dom.js" type="text/javascript" charset="utf-8"></script>
<script src="build/browser.min.js" type="text/javascript" charset="utf-8"></script>

<body>
<div id="main"></div>

<script type="text/babel">
var listData = ['小红','aa','bb'];

	var List = React.createClass({
		getDefaultProps:function(){
			//创建组件的时候执行
			console.log('getDefaultProps');
			return {
				listData:[]
			}
		},
		getInitialState:function(){
			console.log('getInitialState')
			return {
				listShow:true
			}
		},
		componentWillMount:function(){
			//获取或者修改初始的状态
			console.log('即将渲染 componentWillMount')
			this.setState({
				listShow:false
			})
		},
		componentDidMount:function(){
			//可以获取真实dom
			//refs 当前组件里面设置了ref属性的元素集合
			console.log(this)

			//获取具体元素 react
			//refs 当前组件里面所有设置了ref属性的元素集合
			console.log(this.refs.list)

			console.log('渲染完成 componentDidMount')
		},
		changeStyle:function(){
			console.log('changeStyle')
			
			this.setState({
				listShow:!this.state.listShow
			})
		},
		render:function(){
			console.log('render')	
					
			var listStyle = {"display":this.state.listShow?"block":"none"}
			var btnHtml = this.state.listShow?"显示":"隐藏"
			return(
				<div ref="wrap">
					<button onClick={this.changeStyle}>{btnHtml}</button>
					<ul ref="list" style={listStyle}>
						{
							this.props.listData.map(function(ele,index){
								return <li key={index}>{ele}</li>
							})
						}
					</ul>
				</div>
			)
		},
		componentWillReceiveProps:function(newProps){
			console.log(newProps,"组件即将收到数据 componentWillReceiveProps")
		},
		shouldComponentUpdate:function(){
			console.log('允许组件更新么? shouldComponentUpdate');
			return true;//false则组件不更新
		},
		componentWillUpdate:function(){
			console.log('componentWillUpdate')
		},
		componentDidUpdate:function(){
			console.log('componentDidUpdate')
		}
	})
	ReactDOM.render(<List listData={listData} test1="1"/>,document.getElementById('main'));

	
</script>
</body>
</html>