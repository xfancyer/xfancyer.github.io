<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>选项卡组件</title>
</head>
<script src="build/react.js" type="text/javascript" charset="utf-8"></script>
<script src="build/react-dom.js" type="text/javascript" charset="utf-8"></script>
<script src="build/browser.min.js" type="text/javascript" charset="utf-8"></script>

<body>
<div id="main"></div>

<script type="text/babel">




//接受一个listData显示在页面上 显示商品列表
var List = React.createClass({
	
	getDefaultProps:function(){
		//给他一个容错的空间
		return {
			listData:[]
		}
	},
	render:function(){
		//console.log(this.props.productData['hotData'])
		return(
			<ul className="produce-list">
				{
					this.props.listData.map(function(ele,index){ 
					 	return <li key={index}>{ele}</li>
					})
				}
			</ul>
			
		)
	},
	componentWillReceiveProps:function(newProps){
		
	}
})
var ListWrap = React.createClass({
	getInitialState:function(){
		var types = Object.keys(this.props.productData);
		//['hotData','newData']
		return {
			types:types,
			selectedType:"hotData"
		}
		console.log(this.state.types)
	},
	changeSelectedType:function(index){
		console.log(index)
		this.setState({
			selectedType:this.state.types[index]
		})
	},
	render:function(){

		//console.log(this.props.productData["hotData"])
		//显示的数据
		var nowp = this.props.productData[this.state.selectedType];
		
		return(
			<div className="wrap">
				<div className="type-list">
					{/* <div>
						<button onClick={}>hot</button>
						<button onClick={}>new</button>
					</div> */}
					<div className="btn-list">
						{
							this.state.types.map(function(ele,index){
								return <button onClick={this.changeSelectedType.bind(this,index)} key={index}>{ele}</button>
							}.bind(this))
						}
					</div>
					<List listData={nowp}/>
					
				</div>
			</div>
		)
	}
})

{/* 
	为什么将productData写在这? 
	模拟数据，真实中可能是后台给你提供的
	通过props/state获取数据
*/}
{/* 
	var types = [];
	for(var attr in this.props.productData){
		types.push(attr)
	}
	=== types = Object.keys(this.props.productData)
 */}
var productData={
	"hotData":["热卖1","热卖2","热卖3","热卖4","热卖5","热卖6"],
	"newData":["新品1","新品2","新品3","新品4","新品5","新品6"]
}
ReactDOM.render(<ListWrap productData={productData}/>,document.getElementById('main'));

	
</script>
</body>
</html>